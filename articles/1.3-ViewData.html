<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Chapter 3 - Understanding and Viewing Data • naturecounts</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Chapter 3 - Understanding and Viewing Data">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-dark" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">naturecounts</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.4.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/1.1-Introduction.html">Chapter 1 - Introduction</a></li>
    <li><a class="dropdown-item" href="../articles/1.2-LoadPackage.html">Chapter 2 - Loading R Packages</a></li>
    <li><a class="dropdown-item" href="../articles/1.3-ViewData.html">Chapter 3 - Understanding and Viewing Data</a></li>
    <li><a class="dropdown-item" href="../articles/1.4-DownloadData.html">Chapter 4 - Downloading and Filtering Data</a></li>
    <li><a class="dropdown-item" href="../articles/1.5-ManipData.html">Chapter 5 - Data Manipulation</a></li>
    <li><a class="dropdown-item" href="../articles/1.6-VisualData.html">Chapter 6 - Data Visualization</a></li>
    <li><a class="dropdown-item" href="../articles/1.7-Answers.html">Chapter 7 - Answers</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../articles/index.html">More articles...</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Functions</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/BirdsCanada/naturecounts/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Chapter 3 - Understanding and Viewing Data</h1>
            
            <h4 data-toc-skip class="date">2025-04-07</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/BirdsCanada/naturecounts/blob/main/vignettes/articles/1.3-ViewData.Rmd" class="external-link"><code>vignettes/articles/1.3-ViewData.Rmd</code></a></small>
      <div class="d-none name"><code>1.3-ViewData.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="Data3">Understanding and Viewing Data<a class="anchor" aria-label="anchor" href="#Data3"></a>
</h2>
<p>This chapter begins with a brief introduction to the structure of the
NatureCounts database, followed by a description of access levels and
how to create a user account. We then provide instructions on how to
view data from various collections and apply filters.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/BirdsCanada/naturecounts" class="external-link">naturecounts</a></span><span class="op">)</span></span></code></pre></div>
<blockquote>
<p>The code in this Chapter will not work unless you replace
<code>"testuser"</code> with your actual user name. You will be prompted
to enter your password.</p>
</blockquote>
<div class="section level3">
<h3 id="Data3-1">Data Structure<a class="anchor" aria-label="anchor" href="#Data3-1"></a>
</h3>
<p>The <a href="https://naturecounts.ca/nc/default/nc_bmde.jsp" class="external-link">Bird
Monitoring Data Exchange</a> (BMDE) was developed to be a standardized
data exchange schema to promote the sharing and analysis of avian
observational data. The schema is the core sharing standard of the <a href="http://www.avianknowledge.net" class="external-link">Avian Knowledge Network</a>.The
BMDE (currently version 2.0) includes 169 <em>core</em> fields
(variables) that are capable of capturing all metrics and descriptors
associated with a bird observation. The BMDE schema was extended in
2018, and the <em>complete</em> version now includes 265 fields
(variables).</p>
<blockquote>
<p><strong>Fields</strong> are variables or columns in a data set</p>
</blockquote>
<p>By default, the naturecounts package downloads the data with the
<em>minimum</em> set of fields/columns. However, for more advanced
applications, users may wish to specify which fields/columns to return
using the <code>field_set</code> and <code>fields</code> options in the
<code><a href="../reference/nc_data_dl.html">nc_data_dl()</a></code> function. For help with this feature, see the
naturecounts article <a href="https://birdscanada.github.io/naturecounts/articles/selecting-fields.html">‘Selecting
columns and fields to download’</a>.</p>
</div>
<div class="section level3">
<h3 id="Data3-2">Levels of Data Access<a class="anchor" aria-label="anchor" href="#Data3-2"></a>
</h3>
<p>NatureCounts hosts many datasets, representing in excess of 170
million occurrence records, with a primary focus on Canadian bird
monitoring data. Many of those datasets are from projects lead by Birds
Canada and/or its partners. While we strive to make our data as openly
available as possible, we also need to recognize the needs of our
partners and funders.</p>
<p>NatureCounts has five <a href="https://naturecounts.ca/nc/default/nc_access_levels.jsp" class="external-link">Levels of
Data Access</a>, which define how each dataset can be used. Those levels
are set individually for each dataset, in consultation with the various
partners and data custodians involved.</p>
<ul>
<li><p>Level 0: most restricted (archival only)</p></li>
<li><p>Level 1: archival only, metadata visible</p></li>
<li><p>Level 2: data used for visualizations only</p></li>
<li><p>Level 3: data available to third parties by request</p></li>
<li><p>Level 4: data shared with external portals and available by
request</p></li>
<li><p>Level 5: open access</p></li>
</ul>
<p>All contributing members of NatureCounts have complete authority over
the use of the data they have provided, and can withhold data at any
time from any party or application. All users of any NatureCounts data
must clearly acknowledge the contribution of the members who are making
data available. Each dataset comes with its own <a href="https://naturecounts.ca/nc/default/nc_data_sharing.jsp" class="external-link">Data
Sharing Policy</a> that defines the various conditions for data
usage.</p>
<p>You can view the Data Access Level for each collection on the <a href="https://naturecounts.ca/nc/default/datasets.jsp" class="external-link">NatureCounts
Datasets</a> page or using the <a href="#Data3.5">metadata</a> function
(see <code>akn_level</code>):</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">collections</span><span class="op">&lt;-</span><span class="fu"><a href="../reference/meta.html">meta_collections</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/View.html" class="external-link">View</a></span><span class="op">(</span><span class="va">collections</span><span class="op">)</span></span></code></pre></div>
<blockquote>
<p>You can create a stand alone table for any metadata table using
similar syntax as above</p>
</blockquote>
<p>To retrieve the metadata for a specific set of collections based on
its project_id, you can index the ‘collections’ dataframe.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Specify the project_id you want to retrieve</span></span>
<span><span class="va">projectID</span> <span class="op">&lt;-</span> <span class="st">"insert_project_id_number"</span></span>
<span></span>
<span><span class="co"># Subset to retrieve the relevant metadata based on project_id</span></span>
<span><span class="va">collection_metadata</span> <span class="op">&lt;-</span> <span class="va">collections</span><span class="op">[</span><span class="va">collections</span><span class="op">$</span><span class="va">project_id</span> <span class="op">==</span> <span class="va">projectID</span>, <span class="op">]</span></span>
<span></span>
<span><span class="co"># View the metadata of the collection(s) with the specified project_id</span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">collection_metadata</span><span class="op">)</span> <span class="op">&gt;</span> <span class="fl">0</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/View.html" class="external-link">View</a></span><span class="op">(</span><span class="va">collection_metadata</span><span class="op">)</span></span>
<span><span class="op">}</span> <span class="kw">else</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="st">"No collection found with the specified project_id."</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="Data3-3">Authorizations<a class="anchor" aria-label="anchor" href="#Data3-3"></a>
</h3>
<p>To access data using the naturecounts R package, you must <a href="https://naturecounts.ca/nc/default/register.jsp" class="external-link">sign up</a> for a
<strong>free</strong> account. Further, if you would like to access
Level 3 or 4 collections you must make a <a href="https://naturecounts.ca/nc/default/searchquery.jsp" class="external-link">data
request</a>. For step-by-step visual instructions, we encourage you to
watch: <a href="link%20to%20be%20provided">NatureCounts: An Introductory
Tutorial</a>.</p>
<blockquote>
<p>Create your <strong>free</strong> account now before continuing with
this workbook</p>
</blockquote>
</div>
<div class="section level3">
<h3 id="Data3-4">Viewing information about NatureCounts collections<a class="anchor" aria-label="anchor" href="#Data3-4"></a>
</h3>
<p>First, lets use the naturecounts R package to view the number of
records available for different collections. To do this we use the
<code><a href="../reference/nc_count.html">nc_count()</a></code> function. You can view <em>all</em> the
available collections and the number of observations using the default
setting.</p>
<p>If a username is provided, the collections are filtered to only those
available to the user. Otherwise all counts from all data sources are
returned (default: <code>show = "all"</code>).</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">nc_count</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/nc_count.html">nc_count</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/View.html" class="external-link">View</a></span><span class="op">(</span><span class="va">nc_count</span><span class="op">)</span></span></code></pre></div>
<p>Or you can view the collections for which you have access using your
username/password.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">nc_count</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/nc_count.html">nc_count</a></span><span class="op">(</span>username <span class="op">=</span> <span class="st">"testuser"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/View.html" class="external-link">View</a></span><span class="op">(</span><span class="va">nc_count</span><span class="op">)</span></span></code></pre></div>
<p>Further refinements can be applied to the <code><a href="../reference/nc_count.html">nc_count()</a></code>
function using <a href="#Download4">filters</a> Options include:
<code>collections</code>, <code>project_id</code>, <code>species</code>,
<code>years</code>, <code>doy</code> (day-of-year), <code>region</code>,
and <code>site_type</code>.</p>
</div>
<div class="section level3">
<h3 id="Data3-5">Metadata codes and descriptions<a class="anchor" aria-label="anchor" href="#Data3-5"></a>
</h3>
<p>There are <a href="https://birdstudiescanada.github.io/naturecounts/reference/meta.html" class="external-link">metadata</a>
associated with the various arguments used in the
<code><a href="../reference/nc_count.html">nc_count()</a></code> and <code><a href="../reference/nc_data_dl.html">nc_data_dl()</a></code> functions, the
latter you will use in <a href="#Download4">Chapter 4</a>. These are
stored locally and can be accessed anytime to help filter your data view
or download query. They include:</p>
<ul>
<li><p><code><a href="../reference/meta.html">meta_country_codes()</a></code>: country codes</p></li>
<li><p><code><a href="../reference/meta.html">meta_statprov_codes()</a></code>: state/Province codes</p></li>
<li><p><code><a href="../reference/meta.html">meta_subnational2_codes()</a></code>: subnational2
codes</p></li>
<li><p><code><a href="../reference/meta.html">meta_iba_codes()</a></code>: Important Bird Area (IBA)
codes</p></li>
<li><p><code><a href="../reference/meta.html">meta_bcr_codes()</a></code>: Bird Conservation Region (BCR)
codes</p></li>
<li><p><code><a href="../reference/meta.html">meta_utm_squares()</a></code>: UTM Square codes</p></li>
<li><p><code><a href="../reference/meta.html">meta_species_authority()</a></code>: species taxonomic
authorities</p></li>
<li><p><code><a href="../reference/meta.html">meta_species_codes()</a></code>: alpha-numeric codes for avian
species</p></li>
<li><p><code><a href="../reference/meta.html">meta_species_taxonomy()</a></code>: codes and taxonomic
information for all species</p></li>
<li><p><code><a href="../reference/meta.html">meta_collections()</a></code>: collections names and
descriptions</p></li>
<li><p><code><a href="../reference/meta.html">meta_breeding_codes()</a></code>: breeding codes and
descriptions</p></li>
<li><p><code><a href="../reference/meta.html">meta_project_protocols()</a></code>: project protocols</p></li>
<li><p><code><a href="../reference/meta.html">meta_projects()</a></code>: projects ids, names, websites, and
descriptions</p></li>
<li><p><code><a href="../reference/meta.html">meta_protocol_types()</a></code>: protocol types and
descriptions</p></li>
</ul>
<p>Any of these functions can be used to browse the code lists relevant
to your search. For example, you can view the metadata for Birds Canada
projects, including project ids using:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">project_ids</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/meta.html">meta_projects</a></span><span class="op">(</span><span class="op">)</span> <span class="co"># retrieve the project_ids represented in the repository </span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/View.html" class="external-link">View</a></span><span class="op">(</span><span class="va">project_ids</span><span class="op">)</span> <span class="co"># explore the dataframe </span></span></code></pre></div>
<p>Using the above functions to search by country, state/province,
subnational2, BCR etc. is especially useful for regional filtering in
this next section.</p>
</div>
<div class="section level3">
<h3 id="Data3-6">Region &amp; Species filtering<a class="anchor" aria-label="anchor" href="#Data3-6"></a>
</h3>
<p>Filtering will often be done based on geographic extent (i.e.,
<code>region</code>). To filter by <code>region</code> you must provide
a named list with <em>one</em> of the following:</p>
<ul>
<li><p><code>country</code>: country code (e.g., CA for Canada)</p></li>
<li><p><code>statprov</code>: state/province code (e.g., MB for
Manitoba)</p></li>
<li><p><code>subnational2</code>: subnational (type 2) code (e.g.,
CA.MB.07 for the Brandon Area)</p></li>
<li><p><code>iba</code>: Important Bird Areas (IBA) code (e.g., AB001
for Beaverhill Lake in Alberta)</p></li>
<li><p><code>bcr</code>: Bird Conservation Regions (e.g., 2 for Western
Alaska)</p></li>
<li><p><code>utm_squares</code>: UTM square code (e.g., 10UFE96 for a
grid in Alberta)</p></li>
<li><p><code>bbox</code>: bounding box coordinates (e.g., c(left =
-101.097223, bottom = 50.494717, right = -99.511239, top = 51.027557)
for a box containing Riding Mountain National Park in Manitoba). On the
NatureCounts web portal there is a handy <a href="https://www.birdscanada.org/birdmon/default/searchquery.jsp" class="external-link">Within
Coordinates</a>) tool to help you retrieve custom coordinates for your
data query and/or download.</p></li>
</ul>
<p>The search_region function may be used to search a region by name
(English or French) by specifying the ‘type’ argument.</p>
<p>For example, by country;</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/search_region.html">search_region</a></span><span class="op">(</span><span class="st">"États-Unis"</span>, type <span class="op">=</span> <span class="st">"country"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 3 × 3</span></span></span>
<span><span class="co">##   country_code country_name                         country_name_fr             </span></span>
<span><span class="co">##   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                                <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                       </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">1</span> UM           United States Minor Outlying Islands Îles mineures éloignées des…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">2</span> US           United States                        États-Unis                  </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">3</span> VI           Virgin Uslands, U.S.                 Îles Vierges des États-Unis</span></span></code></pre>
<p>Or by Bird Conservation Region:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/search_region.html">search_region</a></span><span class="op">(</span><span class="st">"rainforest"</span>, type <span class="op">=</span> <span class="st">"bcr"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 1 × 4</span></span></span>
<span><span class="co">##     bcr bcr_name                    bcr_name_es                      bcr_name_fr</span></span>
<span><span class="co">##   <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                            <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">1</span>     5 Northern Pacific Rainforest Bosque Lluvioso del Pacífico No… Forêts plu…</span></span></code></pre>
<p>When using the <code><a href="../reference/nc_count.html">nc_count()</a></code> view function, you have the
helpful option of filtering data by region. Let’s demonstrate how to use
this function and the <code>region</code> argument with a few
examples.</p>
<p>First, let’s limit our data search to Quebec:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/nc_count.html">nc_count</a></span><span class="op">(</span>region <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>statprov<span class="op">=</span><span class="st">"QC"</span><span class="op">)</span><span class="op">)</span> <span class="co"># filter nc_count by statprov</span></span></code></pre></div>
<p>Next, let’s say we want to narrow down our search to the subnational
level (Montreal and Toronto) but don’t know the corresponding codes for
these regions.</p>
<p>Browse the code list:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/View.html" class="external-link">View</a></span><span class="op">(</span><span class="fu"><a href="../reference/meta.html">meta_subnational2_codes</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>Or, more efficiently, search by region:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/search_region.html">search_region</a></span><span class="op">(</span><span class="st">"Montreal"</span>, type <span class="op">=</span> <span class="st">"subnational2"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 1 × 5</span></span></span>
<span><span class="co">##   country_code statprov_code subnational2_code subnational2_name      ebird_code</span></span>
<span><span class="co">##   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">1</span> CA           QC            CA.QC.MR          Communauté-Urbaine-de… CA-QC-MR</span></span></code></pre>
<p>Great, we now know the codes we need and can view our metadata using
<code><a href="../reference/nc_count.html">nc_count()</a></code>:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/nc_count.html">nc_count</a></span><span class="op">(</span>region <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>subnational2 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"CA-QC-MR"</span>, <span class="st">"CA-ON-TO"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Without a username, using 'show = "all"'</span></span></code></pre>
<pre><code><span><span class="co">## Using filters: subnational2 (CA-QC-MR, CA-ON-TO)</span></span></code></pre>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 469 × 4</span></span></span>
<span><span class="co">##    collection akn_level access     nrecords</span></span>
<span><span class="co">##    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 1</span> ABATLAS1           5 full         <span style="text-decoration: underline;">123</span>364</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 2</span> ABATLAS2           5 full         <span style="text-decoration: underline;">201</span>357</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 3</span> ABBIRDRECS         5 full         <span style="text-decoration: underline;">357</span>264</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 4</span> ABOWLS             4 by request    <span style="text-decoration: underline;">20</span>956</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 5</span> ACCWS              3 by request    <span style="text-decoration: underline;">22</span>889</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 6</span> ATBANS             3 by request      267</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 7</span> ATOWLS             4 by request    <span style="text-decoration: underline;">34</span>149</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 8</span> AWSGS              3 by request     <span style="text-decoration: underline;">8</span>931</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 9</span> BBS                5 full        5<span style="text-decoration: underline;">735</span>895</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">10</span> BBS50-CAN          5 full        4<span style="text-decoration: underline;">543</span>180</span></span>
<span><span class="co">## <span style="color: #949494;"># ℹ 459 more rows</span></span></span></code></pre>
<p>Similarly, this function can be used to view metadata for a bounding
box using latitude and longitude coordinates:</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/nc_count.html">nc_count</a></span><span class="op">(</span>region <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>bbox <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>left <span class="op">=</span> <span class="op">-</span><span class="fl">125</span>, bottom <span class="op">=</span> <span class="fl">45</span>, </span>
<span>                                right <span class="op">=</span> <span class="op">-</span><span class="fl">100</span>, top <span class="op">=</span> <span class="fl">50</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Without a username, using 'show = "all"'</span></span></code></pre>
<pre><code><span><span class="co">## Using filters: bbox_left (-125); bbox_bottom (45); bbox_right (-100); bbox_top (50)</span></span></code></pre>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 169 × 4</span></span></span>
<span><span class="co">##    collection      akn_level access     nrecords</span></span>
<span><span class="co">##    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>               <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 1</span> ABATLAS1                5 full           <span style="text-decoration: underline;">9</span>827</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 2</span> ABATLAS2                5 full          <span style="text-decoration: underline;">25</span>648</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 3</span> ABBIRDRECS              5 full          <span style="text-decoration: underline;">39</span>546</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 4</span> ABOWLS                  4 by request      306</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 5</span> BBS                     5 full         <span style="text-decoration: underline;">373</span>698</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 6</span> BBS50-CAN               5 full         <span style="text-decoration: underline;">414</span>770</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 7</span> BBS50-US-WEST           5 full        1<span style="text-decoration: underline;">435</span>081</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 8</span> BCATLAS1BE_DO           5 full           <span style="text-decoration: underline;">8</span>786</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 9</span> BCATLAS1BE_RAW          5 full         <span style="text-decoration: underline;">106</span>886</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">10</span> BCATLAS1BE_SUMM         5 full          <span style="text-decoration: underline;">41</span>747</span></span>
<span><span class="co">## <span style="color: #949494;"># ℹ 159 more rows</span></span></span></code></pre>
<p>Another commonly used filter is specific to <code>species</code>. In
order to filter by <code>species</code> you need to get the species id
codes. These are numeric codes that reflect species identity.</p>
<p>For all species, you can search the NatureCounts repository by
scientific, English or French name with the search_species()
function.</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/search_species.html">search_species</a></span><span class="op">(</span><span class="st">"chickadee"</span><span class="op">)</span> <span class="co"># returns all chickadee species ids</span></span></code></pre></div>
<p>The corresponding species id can then be used to download the data
either directly or by saving and referencing the data frame: <a href="#Data4">see Chapter 4</a></p>
<p>For birds, you can also search by alphanumeric species code with the
search_species_code() function.</p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">species_codes</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/search_species_code.html">search_species_code</a></span><span class="op">(</span><span class="op">)</span> <span class="co"># returns all species codes represented in the database.</span></span></code></pre></div>
<p>This function, by default, uses the BSCDATA taxonomic authority and
returns all species codes related to the search term including related
subspecies. For this reason, it is considered a more robust method for
ensuring that you do not miss observations in your search.</p>
<p>If you’re interested in a particular species, and any recognized
subspecies, you can filter your search:</p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/search_species_code.html">search_species_code</a></span><span class="op">(</span><span class="st">"BCCH"</span><span class="op">)</span> <span class="co"># Filters by species code</span></span></code></pre></div>
<p>The search function is case insensitive:</p>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/search_species_code.html">search_species_code</a></span><span class="op">(</span><span class="st">"bcch"</span><span class="op">)</span> <span class="co"># Also filters by species code</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 1 × 5</span></span></span>
<span><span class="co">##   species_id BSCDATA scientific_name      english_name           french_name    </span></span>
<span><span class="co">##        <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>          </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">1</span>      <span style="text-decoration: underline;">14</span>280 BCCH    Poecile atricapillus Black-capped Chickadee Mésange à tête…</span></span></code></pre>
<p>It is important to note that species subdivisions (subspecies,
subpopulations, hybrids, etc.) can also be recognized with different
codes across taxonomic authority (BSCDATA, CBC).</p>
<p>For example, BSCDATA recognizes 3 sub groups of the Dark-eyed
junco:</p>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/search_species_code.html">search_species_code</a></span><span class="op">(</span><span class="st">"DEJU"</span><span class="op">)</span> <span class="co"># Returns species ids for Junco hyemali and 3 related subgroups</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 4 × 5</span></span></span>
<span><span class="co">##   species_id BSCDATA scientific_name                    english_name french_name</span></span>
<span><span class="co">##        <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                              <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">1</span>      <span style="text-decoration: underline;">19</span>090 SCJU    Junco hyemalis hyemalis/carolinen… Dark-eyed J… Junco ardo…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">2</span>      <span style="text-decoration: underline;">19</span>110 PSJU    Junco hyemalis mearnsi             Dark-eyed J… Junco ardo…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">3</span>      <span style="text-decoration: underline;">42</span>218 DEJU    Junco hyemalis                     Dark-eyed J… Junco ardo…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">4</span>      <span style="text-decoration: underline;">47</span>928 ORJU    Junco hyemalis [oreganus Group]    Dark-eyed J… Junco ardo…</span></span></code></pre>
<p>We have to modify our search when filtering by the CBC code system.
This taxonomic authority recognizes 9 sub group hybrids of the Dark-eyed
junco, as well as the Guadalupe junco:</p>
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/search_species_code.html">search_species_code</a></span><span class="op">(</span><span class="st">"12385"</span>, authority <span class="op">=</span> <span class="st">"CBC"</span><span class="op">)</span> <span class="co"># Returns the species ids and CBC codes for Junco hyemali, 9 subgroups, and the Guadelupe junco</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 11 × 5</span></span></span>
<span><span class="co">##    species_id CBC   scientific_name                     english_name french_name</span></span>
<span><span class="co">##         <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                               <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 1</span>      <span style="text-decoration: underline;">42</span>218 12385 Junco hyemalis                      Dark-eyed J… Junco ardo…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 2</span>      <span style="text-decoration: underline;">19</span>090 12386 Junco hyemalis hyemalis/carolinens… Dark-eyed J… Junco ardo…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 3</span>      <span style="text-decoration: underline;">41</span>434 12388 Junco hyemalis cismontanus          Dark-eyed J… Junco ardo…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 4</span>      <span style="text-decoration: underline;">19</span>100 12389 Junco hyemalis [oreganus Group]     Dark-eyed J… Junco ardo…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 5</span>      <span style="text-decoration: underline;">19</span>110 12390 Junco hyemalis mearnsi              Dark-eyed J… Junco ardo…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 6</span>      <span style="text-decoration: underline;">42</span>219 12391 Junco hyemalis [oreganus Group] x … Dark-eyed J… Junco ardo…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 7</span>      <span style="text-decoration: underline;">19</span>112 12392 Junco hyemalis aikeni               Dark-eyed J… Junco ardo…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 8</span>      <span style="text-decoration: underline;">19</span>111 12394 Junco hyemalis caniceps             Dark-eyed J… Junco ardo…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 9</span>      <span style="text-decoration: underline;">42</span>220 12395 Junco hyemalis mearnsi x caniceps   Dark-eyed J… Junco ardo…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">10</span>      <span style="text-decoration: underline;">40</span>859 12396 Junco hyemalis dorsalis             Dark-eyed J… Junco ardo…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">11</span>      <span style="text-decoration: underline;">39</span>768 12398 Junco insularis                     Guadalupe J… Junco de G…</span></span></code></pre>
<p>You can search by more than one authority at the same time. Note that
your search term only needs to match one authority (not both), and that
the information returned reflects both authorities combined.</p>
<div class="sourceCode" id="cb32"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/View.html" class="external-link">View</a></span><span class="op">(</span><span class="fu"><a href="../reference/search_species_code.html">search_species_code</a></span><span class="op">(</span><span class="st">"DEJU"</span>, authority <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"BSCDATA"</span>, <span class="st">"CBC"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>If you do not want all subgroups, you can use the results = “exact”
argument to return only an exact match.</p>
<div class="sourceCode" id="cb33"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/search_species_code.html">search_species_code</a></span><span class="op">(</span><span class="st">"DEJU"</span>, results <span class="op">=</span> <span class="st">"exact"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 1 × 5</span></span></span>
<span><span class="co">##   species_id BSCDATA scientific_name english_name    french_name  </span></span>
<span><span class="co">##        <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">1</span>      <span style="text-decoration: underline;">42</span>218 DEJU    Junco hyemalis  Dark-eyed Junco Junco ardoisé</span></span></code></pre>
<p>For additional examples and more advanced options are available
online for retrieving <a href="https://birdstudiescanada.github.io/naturecounts/articles/region-codes.html" class="external-link">Region</a>
and <a href="https://birdscanada.github.io/naturecounts/articles/species-codes.html#advanced-searches">Species</a>
codes.</p>
</div>
<div class="section level3">
<h3 id="Data3-7">Examples<a class="anchor" aria-label="anchor" href="#Data3-7"></a>
</h3>
<p>Here are a few examples for you to work through to become familiar
with the <code><a href="../reference/nc_count.html">nc_count()</a></code> function.</p>
<p><em>Example 1</em>: Determine the number of collections and records
for a specific <em>region</em>. The options include:
<code>country</code>, <code>statprov</code>, <code>subnational2</code>,
<code>iba</code>, <code>bcr</code>, <code>utm_squares</code>, and
<code>bbox</code>. You can find details and examples on how to <a href="https://birdstudiescanada.github.io/naturecounts/articles/region-codes.html" class="external-link"><code>search_region()</code></a>
at the link provided.</p>
<p>The following code will retrieve all available collections and number
of records for British Columbia</p>
<div class="sourceCode" id="cb35"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/search_region.html">search_region</a></span><span class="op">(</span><span class="st">"British Columbia"</span>, type <span class="op">=</span> <span class="st">"statprov"</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/nc_count.html">nc_count</a></span><span class="op">(</span>region <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>statprov <span class="op">=</span> <span class="st">"BC"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><em>Example 2</em>: Determine the number of records for a specific
<em>species</em>. You can find details and examples on how to <a href="https://birdstudiescanada.github.io/naturecounts/reference/search_species_code.html" class="external-link"><code>search_species_code()</code></a>
based on 4 letter alpha code and <a href="https://birdstudiescanada.github.io/naturecounts/reference/search_species.html" class="external-link"><code>search_species()</code></a>
based on common names at the links provided.</p>
<p>The following code will retrieve all available collections and number
of records for Red-headed Woodpecker</p>
<div class="sourceCode" id="cb36"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/search_species.html">search_species</a></span><span class="op">(</span><span class="st">"Red-headed Woodpecker"</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/search_species_code.html">search_species_code</a></span><span class="op">(</span><span class="st">"RHWO"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">RHWO</span><span class="op">&lt;-</span><span class="fu"><a href="../reference/nc_count.html">nc_count</a></span><span class="op">(</span>species <span class="op">=</span> <span class="fl">10060</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/View.html" class="external-link">View</a></span><span class="op">(</span><span class="va">RHWO</span><span class="op">)</span></span></code></pre></div>
<p><em>Example 3</em>: We can further refine the Red-headed Woodpecker
example (above) by filtering the species-specific data by region (e.g.,
<a href="http://nabci-us.org/assets/images/bcr_map2.jpg" class="external-link">Bird
Conservation Region</a> 11), time period (e.g., 2015-2019), or a
combination of both.</p>
<div class="sourceCode" id="cb37"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">RHWO_11</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/nc_count.html">nc_count</a></span><span class="op">(</span>species <span class="op">=</span> <span class="fl">10060</span>, region <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>bcr <span class="op">=</span> <span class="st">"11"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/View.html" class="external-link">View</a></span><span class="op">(</span><span class="va">RHWO_11</span><span class="op">)</span></span>
<span></span>
<span><span class="va">RHWO_year</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/nc_count.html">nc_count</a></span><span class="op">(</span>species <span class="op">=</span> <span class="fl">10060</span>, year <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2015</span>, <span class="fl">2019</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/View.html" class="external-link">View</a></span><span class="op">(</span><span class="va">RHWO_year</span><span class="op">)</span></span>
<span></span>
<span><span class="va">RHWO_11_year</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/nc_count.html">nc_count</a></span><span class="op">(</span>species <span class="op">=</span> <span class="fl">10060</span>, region <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>bcr <span class="op">=</span> <span class="st">"11"</span><span class="op">)</span>, year <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2015</span>, <span class="fl">2019</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/View.html" class="external-link">View</a></span><span class="op">(</span><span class="va">RHWO_11_year</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="Data3-8">Exercises<a class="anchor" aria-label="anchor" href="#Data3-8"></a>
</h3>
<p>Now apply your newly acquired skills!</p>
<p><em>Exercise 1</em>: If you are interesting in doing a research
project on Snowy Owls in Quebec, which three collections are you most
likely to consider using (i.e., which have the most data)?</p>
<p>Answer: EBird-CA-QC, OISEAUXQC, CBC</p>
<p><em>Exercise 2</em>: How many records of Gadwal are in the <a href="https://www.birdscanada.org/birdmon/atowls/datasets.jsp?code=BCCWS" class="external-link">British
Columbia Coastal Waterbird Survey</a> collection? What if you are only
interested in records from 2010-2019, how many records are
available?</p>
<p>Answer: 702, 389</p>
<p>Full answers to the exercises can be found in <a href="#Ans7.1">Chapter 7</a>.</p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Steffi LaZerte, Denis Lepage.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
