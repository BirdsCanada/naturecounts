<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Chapter 5 - Land Cover Data • naturecounts</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Chapter 5 - Land Cover Data">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-dark" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">naturecounts</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.4.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/1.1-Introduction.html">Chapter 1 - Introduction</a></li>
    <li><a class="dropdown-item" href="../articles/1.2-LoadPackage.html">Chapter 2 - Loading R Packages</a></li>
    <li><a class="dropdown-item" href="../articles/1.3-ViewData.html">Chapter 3 - Understanding and Viewing Data</a></li>
    <li><a class="dropdown-item" href="../articles/1.4-DownloadData.html">Chapter 4 - Downloading and Filtering Data</a></li>
    <li><a class="dropdown-item" href="../articles/1.5-ManipData.html">Chapter 5 - Data Manipulation</a></li>
    <li><a class="dropdown-item" href="../articles/1.6-VisualData.html">Chapter 6 - Data Visualization</a></li>
    <li><a class="dropdown-item" href="../articles/1.7-Answers.html">Chapter 7 - Answers</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../articles/index.html">More articles...</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Functions</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/BirdsCanada/naturecounts/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Chapter 5 - Land Cover Data</h1>
            
            <h4 data-toc-skip class="date">2025-03-27</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/BirdsCanada/naturecounts/blob/main/vignettes/articles/2.5-LandcoverData.Rmd" class="external-link"><code>vignettes/articles/2.5-LandcoverData.Rmd</code></a></small>
      <div class="d-none name"><code>2.5-LandcoverData.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="chapter-5-land-cover-data">Chapter 5: Land Cover Data<a class="anchor" aria-label="anchor" href="#chapter-5-land-cover-data"></a>
</h2>
<div class="section level6">
<h6 id="authors-dimitrios-markou-danielle-ethier">Authors: Dimitrios Markou, Danielle Ethier<a class="anchor" aria-label="anchor" href="#authors-dimitrios-markou-danielle-ethier"></a>
</h6>
<blockquote>
<p>In <a href="2.4-ElevationData.html">Chapter 4</a>, you processed
Digital Terrain Models, applied crop and mask procedures, and extracted
elevation values to combine with NatureCounts data. This chapter will
build on these skills by extracting land cover data over <a href="https://parks.canada.ca/pn-np/qc/mauricie/nature" class="external-link">La Mauricie
National Park</a> and combine these values to NatureCounts data from the
<a href="https://naturecounts.ca/nc/default/datasets.jsp?code=QCATLAS2PC&amp;sec=bmdr" class="external-link">Quebec
Breeding Bird Atlas (2010 - 2014)</a>.</p>
</blockquote>
<p><strong>Land cover</strong> describes the surface cover on the ground
like vegetation, urban, water, and bare soil while <strong>land
use</strong> describes the purpose that the land serves like recreation,
wildlife habitat, and agriculture. See <a href="https://natural-resources.canada.ca/maps-tools-and-publications/satellite-imagery-elevation-data-and-air-photos/tutorial-fundamentals-remote-sensing/educational-resources-applications/land-cover-land-use/land-cover-land-use/9373" class="external-link">Land
Cover &amp; Land Use</a> from Natural Resources Canada for more
information.</p>
<p><strong>To proceed with this chapter, complete section 4.1 Data Setup
from <a href="2.4-ElevationData.html">Chapter 4: Elevation
Data</a></strong>. <strong>This Chapter will guide you through how to
download the National Park boundary and NatureCounts data which are used
in this lesson. Alternatively, you can access these files on <a href="https://drive.google.com/drive/folders/1gLUC6fROl4kNBvTGselhZif-arPexZbY?usp=sharing" class="external-link">Google
Drive data folder</a>.</strong></p>
</div>
</div>
<div class="section level2">
<h2 id="id_5-0LearningObjectives">5.0 Learning Objectives<a class="anchor" aria-label="anchor" href="#id_5-0LearningObjectives"></a>
</h2>
<p>By the end of <strong>Chapter 5 - Land Cover Data</strong>, users
will know how to:</p>
<ul>
<li>Cropping and masking land cover data: <a href="#id_5.1Crop-Mask">Spatial Extents: Crop and Mask</a>
</li>
<li>Assign land cover class labels and create a custom plot: <a href="#id_5.2ClassLabels">Class Labels</a>
</li>
<li>Create buffers around observation sites (points): <a href="#id_5.3PointBuffers">Point Buffers</a>
</li>
<li>Calculate landscape metrics, including Percent Land Cover (PLAND),
Number of Patches (NP), and Edge Density (ED): <a href="#id_5.4LandscapeMetrics">Landscape Metrics</a>
</li>
<li>Combine NatureCounts data with land cover data for analysis: <a href="#id_5.5Map-Extract">Spatial Join</a>
</li>
</ul>
<p>Load the required packages:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/BirdsCanada/naturecounts" class="external-link">naturecounts</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-spatial.github.io/sf/" class="external-link">sf</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://rspatial.org/" class="external-link">terra</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org" class="external-link">tidyverse</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://lubridate.tidyverse.org" class="external-link">lubridate</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://readr.tidyverse.org" class="external-link">readr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://rstudio.github.io/leaflet/" class="external-link">leaflet</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/trafficonese/leaflet.extras" class="external-link">leaflet.extras</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-spatialecology.github.io/landscapemetrics/" class="external-link">landscapemetrics</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-quantities.github.io/units/" class="external-link">units</a></span><span class="op">)</span></span></code></pre></div>
<p>This tutorial uses the following spatial data:</p>
<ol style="list-style-type: decimal">
<li><p><a href="https://open.canada.ca/data/en/dataset/e1f0c975-f40c-4313-9be2-beb951e35f4e/resource/0744186a-449b-4f1f-9f1e-952a94c6d5ca" class="external-link">Places
administered by Parks Canada</a> - Boundary shapefiles</p></li>
<li>
<p><a href="https://naturecounts.ca/nc/default/datasets.jsp?code=QCATLAS2PC&amp;sec=bmdr" class="external-link">Quebec
Breeding Bird Atlas (2010 - 2014)</a> - NatureCounts bird
observations</p>
<p>These data are available for download via Section 4.1: Data Setup in
<a href="2.4-ElevationData.html">Chapter 4</a>, or on <a href="https://drive.google.com/drive/folders/1gLUC6fROl4kNBvTGselhZif-arPexZbY?usp=sharing" class="external-link">Google
Drive</a></p>
</li>
<li><p><a href="https://open.canada.ca/data/en/dataset/4e615eae-b90c-420b-adee-2ca35896caf6" class="external-link">2015
Land Cover of Canada</a> - Land Cover map (30 m resolution)</p></li>
</ol>
</div>
<div class="section level2">
<h2 id="id_5-1DataSetup">5.1 Data Setup<a class="anchor" aria-label="anchor" href="#id_5-1DataSetup"></a>
</h2>
<p>Read in the National Park boundary you saved or downloaded from <a href="2.4-ElevationData.html">Chapter 4: Elevation Data</a>.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mauricie_boundary</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_read.html" class="external-link">st_read</a></span><span class="op">(</span><span class="st">"path/to/your/mauricie_boundary.shp"</span><span class="op">)</span></span></code></pre></div>
<p>To read in the land cover dataset, navigate to <a href="https://open.canada.ca/data/en/dataset/4e615eae-b90c-420b-adee-2ca35896caf6" class="external-link">2015
Land Cover of Canada</a>, scroll down to <strong>Data and
Resources</strong> and select the TIFF file to download by clicking “Go
to resource”. Extract the data download and save the file to your
<code>data</code> subdirectory before applying
<code><a href="https://rspatial.github.io/terra/reference/rast.html" class="external-link">terra::rast()</a></code>.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># set the path to your landcover data</span></span>
<span><span class="va">landcover</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rspatial.github.io/terra/reference/rast.html" class="external-link">rast</a></span><span class="op">(</span><span class="st">"path/to/your/landcover-2015-classification.tif"</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">landcover</span><span class="op">)</span></span>
<span><span class="co">#&gt; class       : SpatRaster </span></span>
<span><span class="co">#&gt; dimensions  : 160001, 190001, 1  (nrow, ncol, nlyr)</span></span>
<span><span class="co">#&gt; resolution  : 30, 30  (x, y)</span></span>
<span><span class="co">#&gt; extent      : -2600010, 3100020, -885090, 3914940  (xmin, xmax, ymin, ymax)</span></span>
<span><span class="co">#&gt; coord. ref. : NAD83(CSRS) / Canada Atlas Lambert (EPSG:3979) </span></span>
<span><span class="co">#&gt; source      : landcover-2015-classification.tif </span></span>
<span><span class="co">#&gt; color table : 1 </span></span>
<span><span class="co">#&gt; name        : Canada2015</span></span></code></pre></div>
<p>Transform the coordinate reference system (crs) of the National Park
boundary to match that of the land cover dataset.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mauricie_boundary</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_transform.html" class="external-link">st_transform</a></span><span class="op">(</span><span class="va">mauricie_boundary</span>, crs <span class="op">=</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_crs.html" class="external-link">st_crs</a></span><span class="op">(</span><span class="va">landcover</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="spatial-extents-crop-mask">5.2 Spatial Extents: Crop &amp; Mask<a class="anchor" aria-label="anchor" href="#spatial-extents-crop-mask"></a>
</h2>
<p><strong>Cropping</strong> reduces the extent of a raster to the
extent of another raster or vector.</p>
<p>To crop a raster we can apply the <code><a href="https://rspatial.github.io/terra/reference/crop.html" class="external-link">crop()</a></code> function from
the <code>terra</code> package which uses the SpatVector format. Here,
we crop the extent of the land cover raster to the extent of the
National Park. To do this we need to convert the National Park Boundary
to a SpatVector using <code><a href="https://rspatial.github.io/terra/reference/vect.html" class="external-link">vect()</a></code>.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">landcover_crop</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rspatial.github.io/terra/reference/crop.html" class="external-link">crop</a></span><span class="op">(</span><span class="va">landcover</span>, <span class="fu"><a href="https://rspatial.github.io/terra/reference/vect.html" class="external-link">vect</a></span><span class="op">(</span><span class="va">mauricie_boundary</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">landcover_crop</span><span class="op">)</span></span>
<span><span class="co">#&gt; class       : SpatRaster </span></span>
<span><span class="co">#&gt; dimensions  : 967, 1027, 1  (nrow, ncol, nlyr)</span></span>
<span><span class="co">#&gt; resolution  : 30, 30  (x, y)</span></span>
<span><span class="co">#&gt; extent      : 1650060, 1680870, 28020, 57030  (xmin, xmax, ymin, ymax)</span></span>
<span><span class="co">#&gt; coord. ref. : NAD83(CSRS) / Canada Atlas Lambert (EPSG:3979) </span></span>
<span><span class="co">#&gt; source(s)   : memory</span></span>
<span><span class="co">#&gt; color table : 1 </span></span>
<span><span class="co">#&gt; varname     : landcover-2015-classification </span></span>
<span><span class="co">#&gt; name        : Canada2015 </span></span>
<span><span class="co">#&gt; min value   :          1 </span></span>
<span><span class="co">#&gt; max value   :         18</span></span></code></pre></div>
<p><strong>Masking</strong> assigns NA values to cells of a raster not
covered by a vector.</p>
<p>To mask the landcover raster to the National Parks vector extent we
can apply the <code><a href="https://rspatial.github.io/terra/reference/mask.html" class="external-link">mask()</a></code> function from the <code>terra</code>
package which also uses the SpatVector format. This will apply NA values
to all cells outside the extent of the National Park.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">landcover_mask</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rspatial.github.io/terra/reference/mask.html" class="external-link">mask</a></span><span class="op">(</span><span class="va">landcover_crop</span>, <span class="fu"><a href="https://rspatial.github.io/terra/reference/vect.html" class="external-link">vect</a></span><span class="op">(</span><span class="va">mauricie_boundary</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">landcover_mask</span><span class="op">)</span></span>
<span><span class="co">#&gt; class       : SpatRaster </span></span>
<span><span class="co">#&gt; dimensions  : 967, 1027, 1  (nrow, ncol, nlyr)</span></span>
<span><span class="co">#&gt; resolution  : 30, 30  (x, y)</span></span>
<span><span class="co">#&gt; extent      : 1650060, 1680870, 28020, 57030  (xmin, xmax, ymin, ymax)</span></span>
<span><span class="co">#&gt; coord. ref. : NAD83(CSRS) / Canada Atlas Lambert (EPSG:3979) </span></span>
<span><span class="co">#&gt; source(s)   : memory</span></span>
<span><span class="co">#&gt; color table : 1 </span></span>
<span><span class="co">#&gt; varname     : landcover-2015-classification </span></span>
<span><span class="co">#&gt; name        : Canada2015 </span></span>
<span><span class="co">#&gt; min value   :          1 </span></span>
<span><span class="co">#&gt; max value   :         18</span></span></code></pre></div>
<p>Visualize the cropped and masked land cover rasters with a two-panel
plot.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Set up the plot area for 1 row and 2 columns</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></span><span class="op">(</span>mfrow <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Plot the cropped land cover raster</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">landcover_crop</span>, main <span class="op">=</span> <span class="st">"crop"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Add National Park boundary</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_geometry.html" class="external-link">st_geometry</a></span><span class="op">(</span><span class="va">mauricie_boundary</span><span class="op">)</span>, col <span class="op">=</span> <span class="cn">NA</span>, border <span class="op">=</span><span class="st">"purple"</span>, lwd <span class="op">=</span> <span class="fl">2</span>, add <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Plot the masked land cover raster </span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">landcover_mask</span>, main <span class="op">=</span> <span class="st">"mask"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Add National Park boundary</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_geometry.html" class="external-link">st_geometry</a></span><span class="op">(</span><span class="va">mauricie_boundary</span><span class="op">)</span>, col <span class="op">=</span> <span class="cn">NA</span>, border <span class="op">=</span><span class="st">"purple"</span>, lwd <span class="op">=</span> <span class="fl">2</span>, add <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p><img src="figures%2Fnc_sp5_masked_landcover-1.png" alt="Two-panel plot visualizing the cropped and masked land cover rasters"></p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># Reset plotting layout to default</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></span><span class="op">(</span>mfrow <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>OPTIONAL: To write the masked raster to your disk, you can use the
writeRaster() function from terra. <strong>This raster will be used in
<a href="2.7-SummaryTools.html">Chapter 7: Summary Tools</a></strong>.
We have uploaded this file to the <a href="https://drive.google.com/drive/folders/1gLUC6fROl4kNBvTGselhZif-arPexZbY?usp=sharing" class="external-link"><strong>Google
Drive data folder</strong></a> for your convenience in the subfolder
labeled <strong>mauricie</strong>.</p>
<p>To execute this code chunk, remove the # and make sure to specify the
file format (.tif) in the output path</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># output_dir &lt;- "path/to/your/subdirectory/data/landcover_mask.tif" # include the masked raster name and '.tif' argument </span></span>
<span></span>
<span><span class="co"># writeRaster(landcover_mask, output_dir, overwrite = TRUE)</span></span></code></pre></div>
<p>Note: Make sure to include the ‘.tif’ argument when specifying the
output_dir and name of your masked raster file. This specifies the file
type while using writeRaster() which will, otherwise, produce an
error.</p>
</div>
<div class="section level2">
<h2 id="id_5-2ClassLabels">5.2 Class Labels<a class="anchor" aria-label="anchor" href="#id_5-2ClassLabels"></a>
</h2>
<p>To assign the appropriate labels to each land cover class, refer to
the [Class Index](<a href="https://open.canada.ca/data/en/dataset/ee1580ab-a23d-4f86-a09b-79763677eb47/resource/b8411562-49b7-4cf6-ac61-dbb893b182cc" class="external-link uri">https://open.canada.ca/data/en/dataset/ee1580ab-a23d-4f86-a09b-79763677eb47/resource/b8411562-49b7-4cf6-ac61-dbb893b182cc</a><a href="https://open.canada.ca/data/en/dataset/ee1580ab-a23d-4f86-a09b-79763677eb47/resource/b8411562-49b7-4cf6-ac61-dbb893b182cc" class="external-link">)</a>)
and use the <code><a href="https://dplyr.tidyverse.org/reference/case_when.html" class="external-link">case_when()</a></code> function.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">landcover_mask_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rspatial.github.io/terra/reference/as.data.frame.html" class="external-link">as.data.frame</a></span><span class="op">(</span><span class="va">landcover_mask</span>, xy <span class="op">=</span> <span class="cn">TRUE</span>, cells <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">landcover_mask_df</span><span class="op">$</span><span class="va">Canada2015</span><span class="op">)</span><span class="op">)</span> <span class="co"># determine unique land cover class values in the cropped dataset</span></span>
<span><span class="co">#&gt; [[1]]</span></span>
<span><span class="co">#&gt; [1]  5  8  6  1 18 17 10 14 16</span></span>
<span></span>
<span><span class="va">land_cover_data</span> <span class="op">&lt;-</span> <span class="va">landcover_mask_df</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="va">Canada2015</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>  <span class="co"># Sort by land_cover_value</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>landcover_name <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html" class="external-link">case_when</a></span><span class="op">(</span></span>
<span>    <span class="va">Canada2015</span> <span class="op">==</span> <span class="fl">1</span> <span class="op">~</span> <span class="st">"needleleaf"</span>,</span>
<span>    <span class="va">Canada2015</span> <span class="op">==</span> <span class="fl">5</span> <span class="op">~</span> <span class="st">"broadleaf"</span>,</span>
<span>    <span class="va">Canada2015</span> <span class="op">==</span> <span class="fl">6</span> <span class="op">~</span> <span class="st">"mixed forest"</span>,</span>
<span>    <span class="va">Canada2015</span> <span class="op">==</span> <span class="fl">8</span> <span class="op">~</span> <span class="st">"shrubland"</span>,</span>
<span>    <span class="va">Canada2015</span> <span class="op">==</span> <span class="fl">10</span> <span class="op">~</span> <span class="st">"grassland"</span>,</span>
<span>    <span class="va">Canada2015</span> <span class="op">==</span> <span class="fl">14</span> <span class="op">~</span> <span class="st">"wetland"</span>,</span>
<span>    <span class="va">Canada2015</span> <span class="op">==</span> <span class="fl">16</span> <span class="op">~</span> <span class="st">"barren"</span>,</span>
<span>    <span class="va">Canada2015</span> <span class="op">==</span> <span class="fl">17</span> <span class="op">~</span> <span class="st">"urban"</span>,</span>
<span>    <span class="va">Canada2015</span> <span class="op">==</span> <span class="fl">18</span> <span class="op">~</span> <span class="st">"water"</span>,</span>
<span>    <span class="cn">TRUE</span> <span class="op">~</span> <span class="cn">NA_character_</span>  <span class="co"># Handle any unexpected values</span></span>
<span>  <span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>Now we can plot the cropped land cover raster with meaningful names
using <code><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot()</a></code>.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_tile.html" class="external-link">geom_raster</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">land_cover_data</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">x</span>, y <span class="op">=</span> <span class="va">y</span>, fill <span class="op">=</span> <span class="va">landcover_name</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span></span>
<span>    title <span class="op">=</span> <span class="st">"La Mauricie National Park - Landcover 2015"</span>,</span>
<span>    x <span class="op">=</span> <span class="st">"Longitude"</span>,</span>
<span>    y <span class="op">=</span> <span class="st">"Latitude"</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_bw</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/coord_fixed.html" class="external-link">coord_fixed</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">mauricie_boundary</span>, fill <span class="op">=</span> <span class="cn">NA</span>, color <span class="op">=</span> <span class="st">"purple"</span>, size <span class="op">=</span> <span class="fl">1.5</span><span class="op">)</span></span>
<span><span class="co">#&gt; Coordinate system already present. Adding new coordinate system, which will replace the existing one.</span></span></code></pre></div>
<p><img src="figures%2Fnc_sp5_landcover_labels-1.png" alt="Plot depicts the cropped land cover raster with class labels"></p>
</div>
<div class="section level2">
<h2 id="id_5-3PointBuffers">5.3 Point Buffers<a class="anchor" aria-label="anchor" href="#id_5-3PointBuffers"></a>
</h2>
<p>Buffers allow us to generate polygons at a specified distance around
points, lines or other polygons. Because birds use their habitat at the
landscape-level and not at a single observation point, buffers allow us
to summarize land cover and habitat information within the local
neighborhood.</p>
<p>Read in the NatureCounts data you saved from <a href="2.4-ElevationData.html">Chapter 4: Elevation Data</a> or
downloaded from the <a href="https://drive.google.com/drive/folders/1gLUC6fROl4kNBvTGselhZif-arPexZbY?usp=sharing" class="external-link"><strong>Google
Drive data folder</strong></a>.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mauricie_birds_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv</a></span><span class="op">(</span><span class="st">"path/to/your/mauricie_birds_df.csv"</span><span class="op">)</span></span></code></pre></div>
<p><strong>Note: The land cover data (2015) represents a static
environmental variable in this scenario. Here, we assume that land cover
within the National Park did not change drastically across the survey
years (2011 - 2014).</strong></p>
<p>Create an <code>sf</code> object from the NatureCounts data that
represents the unique point count locations.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mauricie_birds_local</span> <span class="op">&lt;-</span> <span class="va">mauricie_birds_df</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_as_sf.html" class="external-link">st_as_sf</a></span><span class="op">(</span>coords <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"longitude"</span>, <span class="st">"latitude"</span><span class="op">)</span>, crs <span class="op">=</span> <span class="fl">4326</span><span class="op">)</span> </span></code></pre></div>
<p>Assign a point id identifier to each location based on its unique
geometry.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mauricie_birds_local</span> <span class="op">&lt;-</span> <span class="va">mauricie_birds_local</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">SiteCode</span>, <span class="va">geometry</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>point_id <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html" class="external-link">cur_group_id</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">geometry</span>, <span class="va">point_id</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/distinct.html" class="external-link">distinct</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">ungroup</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#Note that usually the SiteCode is the unique identifier for each observation site. However, this was not the case for the Quebec Breeding Bird Atlas data. We therefore use the geometry to create a unique identifier for each point.</span></span></code></pre></div>
<p>Use the <code>st_buffer</code> function to generate 3 km diameter
circular neighborhoods (or 1.5 km radius) centered at each observation
location.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mauricie_birds_buffer</span> <span class="op">&lt;-</span> <span class="va">mauricie_birds_local</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://r-spatial.github.io/sf/reference/geos_unary.html" class="external-link">st_buffer</a></span><span class="op">(</span>dist <span class="op">=</span> <span class="fu"><a href="https://r-quantities.github.io/units/reference/units.html" class="external-link">set_units</a></span><span class="op">(</span><span class="fl">1.5</span>, <span class="st">"km"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="id_5-4LandscapeMetrics">5.4 Landscape Metrics<a class="anchor" aria-label="anchor" href="#id_5-4LandscapeMetrics"></a>
</h2>
<p>In landscape ecology, the composition and configuration of land types
tells us what habitat is available and how its distributed spatially.
<strong>Landscape metrics</strong> help us characterize these spatial
patterns across landscapes or within specific areas like point
buffers.</p>
<p>The <code>landscapemetrics</code> package can be used to calculate
some common metrics that quantify habitat composition and
configuration:</p>
<ul>
<li><p>Percent landcover (PLAND) - percent of landscape of a given
class</p></li>
<li><p>Edge density (ED) - total boundary length of all patches of a
given class per unit area</p></li>
<li><p>Number of patches (NP) - number of unique contiguous
units</p></li>
<li><p>Largest patch index (LPI) - percent of the landscape comprised of
the single largest patch</p></li>
<li><p>Mean core area index (CAI_MN) - percent of the patch that is
comprised of core area which is a compound measure of shape, area, and
edge depth.</p></li>
<li><p>Patch cohesion index (COHESION) - area-weighted mean
perimeter-area ratio that helps assess connectivity</p></li>
</ul>
<blockquote>
<p>A “patch” is an intuitive concept that describes a contiguous group
of cells of the same land cover category. Patches can be defined using
the 4-neighbour or 8-neighbour rules.</p>
</blockquote>
<p>For each point buffer, crop and mask the land cover data and
calculate the class-level PLAND and ED. We will do this using a
<code>for</code> loop and store the result in a dataframe.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">lsm</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq_len</a></span><span class="op">(</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/dimensions.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">mauricie_birds_buffer</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">buffer_i</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_transform.html" class="external-link">st_transform</a></span><span class="op">(</span><span class="va">mauricie_birds_buffer</span><span class="op">[</span><span class="va">i</span>, <span class="op">]</span>, crs <span class="op">=</span> <span class="fu"><a href="https://rspatial.github.io/terra/reference/crs.html" class="external-link">crs</a></span><span class="op">(</span><span class="va">landcover</span><span class="op">)</span><span class="op">)</span>  <span class="co"># Match the CRS between the buffer zones and land cover</span></span>
<span>  </span>
<span>  <span class="co"># Crop and mask the landcover data with the buffer areas</span></span>
<span>  <span class="va">lsm</span><span class="op">[[</span><span class="va">i</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rspatial.github.io/terra/reference/crop.html" class="external-link">crop</a></span><span class="op">(</span><span class="va">landcover</span>, <span class="va">buffer_i</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>    <span class="fu"><a href="https://rspatial.github.io/terra/reference/mask.html" class="external-link">mask</a></span><span class="op">(</span><span class="va">buffer_i</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>  </span>
<span>    <span class="co"># Calculate landscape metrics</span></span>
<span>    <span class="fu">calculate_lsm</span><span class="op">(</span>level <span class="op">=</span> <span class="st">"class"</span>, metric <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"pland"</span>, <span class="st">"ed"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>    <span class="co"># Add identifying variables</span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>point_id<span class="op">=</span> <span class="va">buffer_i</span><span class="op">$</span><span class="va">point_id</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>  </span>
<span>    <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">point_id</span>, <span class="va">level</span>, <span class="va">class</span>, <span class="va">metric</span>, <span class="va">value</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co"># Combine results into a single dataframe</span></span>
<span><span class="va">lsm</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind_rows.html" class="external-link">bind_rows</a></span><span class="op">(</span><span class="va">lsm</span><span class="op">)</span></span></code></pre></div>
<p>Add land cover class labels to the dataframe containing the
calculated landscape metrics. Ensure that both columns are the same data
type (factor).</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Define the land cover class labels </span></span>
<span><span class="va">lc_classes</span> <span class="op">&lt;-</span> <span class="va">land_cover_data</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">Canada2015</span>, <span class="va">landcover_name</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/distinct.html" class="external-link">distinct</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="va">lc_classes</span> <span class="op">&lt;-</span><span class="va">lc_classes</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>class <span class="op">=</span> <span class="fu"><a href="https://rspatial.github.io/terra/reference/is.bool.html" class="external-link">as.factor</a></span><span class="op">(</span><span class="va">Canada2015</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">lsm</span><span class="op">&lt;-</span><span class="va">lsm</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>class <span class="op">=</span> <span class="fu"><a href="https://rspatial.github.io/terra/reference/is.bool.html" class="external-link">as.factor</a></span><span class="op">(</span><span class="va">class</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">lsm</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">inner_join</a></span><span class="op">(</span><span class="va">lc_classes</span>, <span class="va">lsm</span>, by <span class="op">=</span> <span class="st">"class"</span><span class="op">)</span></span></code></pre></div>
<p>Create a PLAND column for each land cover type, associated with each
<code>point_id</code>.</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">pland_values</span> <span class="op">&lt;-</span> <span class="va">lsm</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">metric</span> <span class="op">==</span> <span class="st">"pland"</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>                      <span class="co"># Filter for 'pland' metric</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">point_id</span>, <span class="va">landcover_name</span>, <span class="va">value</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>        <span class="co"># Keep relevant columns</span></span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_wider.html" class="external-link">pivot_wider</a></span><span class="op">(</span></span>
<span>    names_from <span class="op">=</span> <span class="va">landcover_name</span>,                     <span class="co"># Create columns for each landcover class</span></span>
<span>    values_from <span class="op">=</span> <span class="va">value</span>,                             <span class="co"># Fill columns with 'pland' values</span></span>
<span>    names_prefix <span class="op">=</span> <span class="st">"pland_"</span>                          <span class="co"># Prefix column names with "pland_"</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<p><strong>Note: Not every land cover type is represented within each
point buffer, hence why some rows might be populated with NA
values.</strong></p>
<p>Calculate the mean class-level PLAND and ED across all point
buffers.</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">lsm_mean</span> <span class="op">&lt;-</span> <span class="va">lsm</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">landcover_name</span>, <span class="va">metric</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span>mean_value <span class="op">=</span> <span class="fu"><a href="https://rspatial.github.io/terra/reference/summarize-generics.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">value</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>, .groups <span class="op">=</span> <span class="st">"drop"</span><span class="op">)</span> </span>
<span></span>
<span><span class="co"># View the resulting dataframe</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">lsm_mean</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 18 × 3</span></span>
<span><span class="co">#&gt;    landcover_name metric mean_value</span></span>
<span><span class="co">#&gt;    &lt;chr&gt;          &lt;chr&gt;       &lt;dbl&gt;</span></span>
<span><span class="co">#&gt;  1 barren         ed         0.167 </span></span>
<span><span class="co">#&gt;  2 barren         pland      0.0130</span></span>
<span><span class="co">#&gt;  3 broadleaf      ed        39.8   </span></span>
<span><span class="co">#&gt;  4 broadleaf      pland     12.2   </span></span>
<span><span class="co">#&gt;  5 grassland      ed         2.16  </span></span>
<span><span class="co">#&gt;  6 grassland      pland      0.248 </span></span>
<span><span class="co">#&gt;  7 mixed forest   ed       115.    </span></span>
<span><span class="co">#&gt;  8 mixed forest   pland     54.8   </span></span>
<span><span class="co">#&gt;  9 needleleaf     ed        79.2   </span></span>
<span><span class="co">#&gt; 10 needleleaf     pland     20.4   </span></span>
<span><span class="co">#&gt; 11 shrubland      ed        12.5   </span></span>
<span><span class="co">#&gt; 12 shrubland      pland      1.32  </span></span>
<span><span class="co">#&gt; 13 urban          ed         5.24  </span></span>
<span><span class="co">#&gt; 14 urban          pland      0.561 </span></span>
<span><span class="co">#&gt; 15 water          ed        15.5   </span></span>
<span><span class="co">#&gt; 16 water          pland     10.5   </span></span>
<span><span class="co">#&gt; 17 wetland        ed         0.400 </span></span>
<span><span class="co">#&gt; 18 wetland        pland      0.0362</span></span></code></pre></div>
<p>Compare the mean class-level PLAND and ED values.</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Plot mean PLAND and ED for each landcover class</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">lsm_mean</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">landcover_name</span>, y <span class="op">=</span> <span class="va">mean_value</span>, color <span class="op">=</span> <span class="va">metric</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">4</span>, alpha <span class="op">=</span> <span class="fl">0.8</span>, position <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/position_dodge.html" class="external-link">position_dodge</a></span><span class="op">(</span>width <span class="op">=</span> <span class="fl">0.4</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Mean PLAND and ED for Each Landcover Class"</span>,</span>
<span>       x <span class="op">=</span> <span class="st">"Landcover Class"</span>,</span>
<span>       y <span class="op">=</span> <span class="st">"Mean Value"</span>,</span>
<span>       color <span class="op">=</span> <span class="st">"Metric"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_minimal</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>axis.text.x <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_text</a></span><span class="op">(</span>angle <span class="op">=</span> <span class="fl">45</span>, hjust <span class="op">=</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html" class="external-link">scale_color_manual</a></span><span class="op">(</span>values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ed"</span> <span class="op">=</span> <span class="st">"red"</span>, <span class="st">"pland"</span> <span class="op">=</span> <span class="st">"darkgreen"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="figures%2Fnc_sp5_mean_metrics-1.png" alt="Plot compares the mean class-level PLAND and ED values"></p>
<blockquote>
<p>It appears like ‘mixed forest’ is the dominant land cover type across
all point buffers. This class also has the highest edge density.</p>
</blockquote>
<p>Calculate the landscape-level ED and NP for each point buffer. Store
the result in a dataframe.</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">lsm_landscape</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq_len</a></span><span class="op">(</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/dimensions.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">mauricie_birds_buffer</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">buffer_i</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_transform.html" class="external-link">st_transform</a></span><span class="op">(</span><span class="va">mauricie_birds_buffer</span><span class="op">[</span><span class="va">i</span>, <span class="op">]</span>, crs <span class="op">=</span> <span class="fu"><a href="https://rspatial.github.io/terra/reference/crs.html" class="external-link">crs</a></span><span class="op">(</span><span class="va">landcover</span><span class="op">)</span><span class="op">)</span>  <span class="co"># Match the CRS between the buffer zones and land cover</span></span>
<span>  </span>
<span>  <span class="co"># Crop and mask the landcover data with the buffer areas</span></span>
<span>  <span class="va">lsm_landscape</span><span class="op">[[</span><span class="va">i</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rspatial.github.io/terra/reference/crop.html" class="external-link">crop</a></span><span class="op">(</span><span class="va">landcover</span>, <span class="va">buffer_i</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>    <span class="fu"><a href="https://rspatial.github.io/terra/reference/mask.html" class="external-link">mask</a></span><span class="op">(</span><span class="va">buffer_i</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>  </span>
<span>    <span class="co"># Calculate landscape metrics</span></span>
<span>    <span class="fu">calculate_lsm</span><span class="op">(</span>level <span class="op">=</span> <span class="st">"landscape"</span>, metric <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"np"</span>, <span class="st">"ed"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>    <span class="co"># Add identifying variables</span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>point_id<span class="op">=</span> <span class="va">buffer_i</span><span class="op">$</span><span class="va">point_id</span>, </span>
<span>           survey_year <span class="op">=</span> <span class="va">buffer_i</span><span class="op">$</span><span class="va">survey_year</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>  </span>
<span>    <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">point_id</span>, <span class="va">level</span>, <span class="va">metric</span>, <span class="va">value</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co"># Combine results into a single dataframe and convert to wide format</span></span>
<span><span class="va">lsm_landscape</span> <span class="op">&lt;-</span> <span class="va">lsm_landscape</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind_rows.html" class="external-link">bind_rows</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_wider.html" class="external-link">pivot_wider</a></span><span class="op">(</span>names_from <span class="op">=</span> <span class="st">"metric"</span>,</span>
<span>              values_from <span class="op">=</span> <span class="st">"value"</span><span class="op">)</span></span></code></pre></div>
<p><strong>Note: Landscape pattern analysis requires careful
consideration for the classification scheme, spatial extent, and choice
of landscape metric - all of which should depend on the objectives of
your study. How you group values also matters as it will influence how
you interpret results.</strong></p>
</div>
<div class="section level2">
<h2 id="id_5-5Map-Extract">5.5 Spatial Join<a class="anchor" aria-label="anchor" href="#id_5-5Map-Extract"></a>
</h2>
<p>Create a spatial dataframe from the NatureCounts data and join the
unique point_id from the buffer geometry to the NatureCounts data by
latitude and longitude using <code>st_join</code>.</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mauricie_birds_sf</span> <span class="op">&lt;-</span> <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_as_sf.html" class="external-link">st_as_sf</a></span><span class="op">(</span><span class="va">mauricie_birds_df</span>, </span>
<span>                        coords <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"longitude"</span>, <span class="st">"latitude"</span><span class="op">)</span>, crs <span class="op">=</span> <span class="fl">4326</span><span class="op">)</span>    <span class="co"># convert to sf object</span></span>
<span></span>
<span><span class="va">mauricie_birds_sf</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_join.html" class="external-link">st_join</a></span><span class="op">(</span><span class="va">mauricie_birds_sf</span>, <span class="va">mauricie_birds_local</span>, join <span class="op">=</span> <span class="va">st_intersects</span><span class="op">)</span></span></code></pre></div>
<p>Transform the CRS of the National Park boundary to match the
NatureCounts data.</p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mauricie_boundary</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_transform.html" class="external-link">st_transform</a></span><span class="op">(</span><span class="va">mauricie_boundary</span>, crs <span class="op">=</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_crs.html" class="external-link">st_crs</a></span><span class="op">(</span><span class="va">mauricie_birds_sf</span><span class="op">)</span><span class="op">)</span> <span class="co"># match the CRS</span></span></code></pre></div>
<p>Summarize the NatureCounts data for mapping. Here we will determine
the number of species observed at each site.</p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Group by point_id and summarize total_count</span></span>
<span><span class="va">mauricie_site_summary</span> <span class="op">&lt;-</span> <span class="va">mauricie_birds_sf</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">point_id</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">point_id</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="co"># Filter out NA values</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span>n_species <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/n_distinct.html" class="external-link">n_distinct</a></span><span class="op">(</span><span class="va">english_name</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>Next we can map both the NatureCounts and land cover data.</p>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Match the CRS</span></span>
<span><span class="va">mauricie_boundary</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_transform.html" class="external-link">st_transform</a></span><span class="op">(</span><span class="va">mauricie_boundary</span>, crs <span class="op">=</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_crs.html" class="external-link">st_crs</a></span><span class="op">(</span><span class="va">landcover</span><span class="op">)</span><span class="op">)</span> </span>
<span></span>
<span><span class="co"># Plot</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="co"># Add the raster layer</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_tile.html" class="external-link">geom_raster</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">land_cover_data</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">x</span>, y <span class="op">=</span> <span class="va">y</span>, fill <span class="op">=</span> <span class="va">landcover_name</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  </span>
<span>  <span class="co"># Add the National Park boundary in red</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">mauricie_boundary</span>, fill <span class="op">=</span> <span class="cn">NA</span>, color <span class="op">=</span> <span class="st">"purple"</span>, size <span class="op">=</span> <span class="fl">0.9</span><span class="op">)</span> <span class="op">+</span></span>
<span>  </span>
<span>  <span class="co"># Add the multipoints from the site summary, sized by total_count</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">mauricie_site_summary</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>size <span class="op">=</span> <span class="va">n_species</span><span class="op">)</span>, color <span class="op">=</span> <span class="st">"black"</span>, shape <span class="op">=</span> <span class="fl">21</span><span class="op">)</span> <span class="op">+</span></span>
<span>  </span>
<span>  <span class="co"># Adjust the size scale for points</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_size.html" class="external-link">scale_size_continuous</a></span><span class="op">(</span>name <span class="op">=</span> <span class="st">"Species Diversity"</span>, range <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">6</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>  <span class="co"># Adjust the range for better visibility</span></span>
<span>  </span>
<span>  <span class="co"># Add labels and theme</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span></span>
<span>    title <span class="op">=</span> <span class="st">"La Mauricie National Park - Landcover 2015"</span>,</span>
<span>    x <span class="op">=</span> <span class="st">"Longitude"</span>,</span>
<span>    y <span class="op">=</span> <span class="st">"Latitude"</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_bw</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  </span>
<span>  <span class="co"># Use coord_sf for compatibility with sf layers</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">coord_sf</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="figures%2Fnc_sp5_landcover_map-1.png" alt="Map depicts species diversity summary points and land cover data in La Mauricie National Park"></p>
<p>Convert the NatureCounts data back to a regular dataframe called
<code>landscape_metrics_df</code>, now labeled by point_id, and append
the landscape-level metrics we calculated in the <a href="#id_5.4LandscapeMetrics">previous section</a>.</p>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">landscape_metrics_df</span> <span class="op">&lt;-</span> <span class="va">mauricie_birds_sf</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_geometry.html" class="external-link">st_drop_geometry</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/distinct.html" class="external-link">distinct</a></span><span class="op">(</span><span class="va">point_id</span>, .keep_all <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>  <span class="co"># Ensure no duplicates based on point_id, but keep all columns</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">left_join</a></span><span class="op">(</span><span class="va">lsm_landscape</span>, by <span class="op">=</span> <span class="st">"point_id"</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">point_id</span>, <span class="va">ed</span>, <span class="va">np</span><span class="op">)</span>  <span class="co"># Keep point_id, ed, and np columns</span></span></code></pre></div>
<p>Append the class level PLAND metric values and keep the
<code>point_id</code> column.</p>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">landscape_metrics_df</span> <span class="op">&lt;-</span> <span class="va">landscape_metrics_df</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">left_join</a></span><span class="op">(</span><span class="va">pland_values</span>, by <span class="op">=</span> <span class="st">"point_id"</span><span class="op">)</span></span></code></pre></div>
<p>OPTIONAL: To save the landscape metrics data as a <em>.csv</em> to
your disk, use the <code><a href="https://rdrr.io/r/utils/write.table.html" class="external-link">write.csv()</a></code> function, specify the name
of your .<em>csv</em> file, and use the row.names = FALSE argument to
exclude row numbers from the output. <strong>The extracted landcover
values will be used to complete <a href="2.7-SummaryTools.html">Chapter
7: Summary Tools</a></strong>. We have uploaded this file to the <a href="https://drive.google.com/drive/folders/1gLUC6fROl4kNBvTGselhZif-arPexZbY?usp=sharing" class="external-link"><strong>Google
Drive data folder</strong></a> for your convenience.</p>
<blockquote>
<p>To execute this code chunk, remove the #</p>
</blockquote>
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># write.csv(landscape_metrics_df , "data/env_covariates/landscape_metrics_df.csv", row.names = FALSE)</span></span></code></pre></div>
<p>Now let’s combine the landscape-level metrics you derived with the
NatureCounts summary data to assess how the landscape composition and
configuration might influence species diversity.</p>
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Join the landscape metrics with the NatureCounts summary data</span></span>
<span><span class="va">lsm_sitesum_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">left_join</a></span><span class="op">(</span><span class="va">mauricie_site_summary</span>, <span class="va">landscape_metrics_df</span>, by <span class="op">=</span> <span class="st">"point_id"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Plot the relationship between species diversity and edge density and the number of patches, respectively</span></span>
<span></span>
<span><span class="co"># n_species vs. edge density (ED)</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">lsm_sitesum_df</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">ed</span>, y <span class="op">=</span> <span class="va">n_species</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span>color <span class="op">=</span> <span class="st">"blue"</span>, alpha <span class="op">=</span> <span class="fl">0.6</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Species Diversity vs. Edge Density"</span>,</span>
<span>       x <span class="op">=</span> <span class="st">"Edge Density (ED)"</span>,</span>
<span>       y <span class="op">=</span> <span class="st">"Number of Species"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_minimal</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="figures%2Fnc_sp5_richness_plots_landcover-1.png" alt="Plot explores the relationship between species richness and landscape metrics"></p>
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># n_species vs. number of patches (NP)</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">lsm_sitesum_df</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">np</span>, y <span class="op">=</span> <span class="va">n_species</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span>color <span class="op">=</span> <span class="st">"green"</span>, alpha <span class="op">=</span> <span class="fl">0.6</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Species Diversity vs. Number of Patches"</span>,</span>
<span>       x <span class="op">=</span> <span class="st">"Number of Patches (NP)"</span>,</span>
<span>       y <span class="op">=</span> <span class="st">"Number of Species"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_minimal</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="figures%2Fnc_sp5_richness_plots_landcover-2.png" alt="Plot explores the relationship between species richness and landscape metrics"></p>
<p>There does not appear to be a clear relationship between species
diversity, edge density, or the number of patches across observation
sites in La Mauricie National Park.</p>
<hr>
<p><strong>Congratulations</strong>! You completed <strong>Chapter 5 -
Land Cover Data</strong>. In this chapter, you successfully plotted land
cover (raster) data and combined NatureCounts data with landscape
metrics derived from land cover data. In <a href="2.6-SatelliteImagery.html">Chapter 6</a>, you will explore how to
download satellite imagery and calculate spectral indices to combine
with NatureCounts data.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Steffi LaZerte, Denis Lepage.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
