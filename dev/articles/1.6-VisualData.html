<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Chapter 6 - Data Visualization • naturecounts</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Chapter 6 - Data Visualization">
<meta name="robots" content="noindex">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-dark" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">naturecounts</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">0.4.1.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/1.1-Introduction.html">Chapter 1 - Introduction</a></li>
    <li><a class="dropdown-item" href="../articles/1.2-LoadPackage.html">Chapter 2 - Loading R Packages</a></li>
    <li><a class="dropdown-item" href="../articles/1.3-ViewData.html">Chapter 3 - Understanding and Viewing Data</a></li>
    <li><a class="dropdown-item" href="../articles/1.4-DownloadData.html">Chapter 4 - Downloading and Filtering Data</a></li>
    <li><a class="dropdown-item" href="../articles/1.5-ManipData.html">Chapter 5 - Data Manipulation</a></li>
    <li><a class="dropdown-item" href="../articles/1.6-VisualData.html">Chapter 6 - Data Visualization</a></li>
    <li><a class="dropdown-item" href="../articles/1.7-Answers.html">Chapter 7 - Answers</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../articles/index.html">More articles...</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Functions</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/BirdsCanada/naturecounts/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Chapter 6 - Data Visualization</h1>
            
            <h4 data-toc-skip class="date">2025-03-27</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/BirdsCanada/naturecounts/blob/docs-update/vignettes/articles/1.6-VisualData.Rmd" class="external-link"><code>vignettes/articles/1.6-VisualData.Rmd</code></a></small>
      <div class="d-none name"><code>1.6-VisualData.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="Visual6">Data Visualization<a class="anchor" aria-label="anchor" href="#Visual6"></a>
</h2>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span> </span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/BirdsCanada/naturecounts" class="external-link">naturecounts</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org" class="external-link">tidyverse</a></span><span class="op">)</span></span></code></pre></div>
<p>You have successfully downloaded and summarized your NatureCounts
dataset. In this chapter we will demonstrate how to do some basic
visualizations with plots.</p>
<blockquote>
<p>The code in this Chapter will not work unless you replace
<code>"testuser"</code> with your actual user name. You will be prompted
to enter your password.</p>
</blockquote>
<div class="section level3">
<h3 id="PM6-1">Plotting<a class="anchor" aria-label="anchor" href="#PM6-1"></a>
</h3>
<p>Plotting your data is a powerful way to detect patterns and make
results stand out. Recall in <a href="#Package2.2">Chapter 2</a> you
installed the <a href="https://www.tidyverse.org/" class="external-link">tidyverse</a>
package, which included <code>ggplot2</code> for data visualizations.
You are encouraged to learn more about this function by reviewing <a href="http://www.cookbook-r.com/Graphs/" class="external-link">Cookbook for R</a>. We also
recommend you download a copy of the RStudio <a href="https://rstudio.com/wp-content/uploads/2015/03/ggplot2-cheatsheet.pdf" class="external-link">Data
Visualization</a> cheat sheet as a reference document.</p>
<p>At the end of <a href="#Manip5">Chapter 5</a> you were exploring fall
migration monitoring data collected at <a href="https://naturecounts.ca/nc/default/datasets.jsp?code=CMMN-DET-VLBO" class="external-link">Vaseux
Lake Bird Observatory</a>, British Columbia. Let’s continue using this
dataset for our plotting example and download the data for
2015-present.</p>
<p>First, lets apply our previously acquired skills to download the
filtered dataset and zero-fill for GRCA, while also keep some extra
variables.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">VLBO</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/nc_data_dl.html">nc_data_dl</a></span><span class="op">(</span>collections <span class="op">=</span> <span class="st">"CMMN-DET-VLBO"</span>, years <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2015</span>, <span class="cn">NA</span><span class="op">)</span>, </span>
<span>                   username <span class="op">=</span> <span class="st">"testuser"</span>, info <span class="op">=</span> <span class="st">"tutorial example"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Using filters: collections (CMMN-DET-VLBO); fields_set (BMDE2.00-min); start_year (2015)</span></span></code></pre>
<pre><code><span><span class="co">## Collecting available records...</span></span></code></pre>
<pre><code><span><span class="co">##      collection nrecords</span></span>
<span><span class="co">## 1 CMMN-DET-VLBO    24373</span></span>
<span><span class="co">## Total records: 24,373</span></span></code></pre>
<pre><code><span><span class="co">## </span></span>
<span><span class="co">## Downloading records for each collection:</span></span></code></pre>
<pre><code><span><span class="co">##   CMMN-DET-VLBO</span></span></code></pre>
<pre><code><span><span class="co">##     Records 1 to 5000 / 24373</span></span></code></pre>
<pre><code><span><span class="co">##     Records 5001 to 10000 / 24373</span></span></code></pre>
<pre><code><span><span class="co">## The server did not respond within 120s. Trying again...</span></span></code></pre>
<pre><code><span><span class="co">##     Records 10001 to 15000 / 24373</span></span></code></pre>
<pre><code><span><span class="co">##     Records 15001 to 20000 / 24373</span></span></code></pre>
<pre><code><span><span class="co">##     Records 20001 to 24373 / 24373</span></span></code></pre>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">GRCA</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/format_zero_fill.html">format_zero_fill</a></span><span class="op">(</span><span class="va">VLBO</span>, species <span class="op">=</span> <span class="fl">15900</span>, </span>
<span>                         by <span class="op">=</span> <span class="st">"SamplingEventIdentifier"</span>, </span>
<span>                         extra_event<span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"survey_year"</span>, <span class="st">"survey_month"</span>, <span class="st">"survey_day"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##  - Consider summarizing multiple observations per set of 'by' before zero-filling to increase speed</span></span></code></pre>
<pre><code><span><span class="co">##  - Converted 'fill' column (ObservationCount) from character to numeric</span></span></code></pre>
<p>First, we are interested if there are any noticeable patterns in
migration timing. For this, we will use the <a href="https://birdstudiescanada.github.io/naturecounts/reference/format_dates.html" class="external-link">add
date and day-of-year helper function</a>, introduced at the end of <a href="#Manip5.3">Chapter 5</a>, to add two new columns to the
dataframe.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">GRCA_dates</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/format_dates.html">format_dates</a></span><span class="op">(</span><span class="va">GRCA</span><span class="op">)</span></span></code></pre></div>
<p>Now we can plot raw counts (y-axis) for each day-of-year
(x-axis).</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">GRCA_dates</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">doy</span>, y <span class="op">=</span> <span class="va">ObservationCount</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="1.6-VisualData_files/figure-html/plot1VLBO-1.png" width="700"></p>
<p>What you will notice is that migration for this species is highest
early in the year and diminishes with time.</p>
<p>Next, we are interested in visually examining the mean number of
migrant GRCA each year, to see if there are any noticeable changes over
time. First, we need to summarise the data. Here, we create a function
that calculates standard error (se) and deploy the <code><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate()</a></code>
function which helps create new variables from existing ones:</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#use this shortcut function to calculate the standard error</span></span>
<span><span class="va">se</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/stats/sd.html" class="external-link">sd</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/base/MathFun.html" class="external-link">sqrt</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">GRCA_year</span> <span class="op">&lt;-</span> <span class="va">GRCA</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">survey_year</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span>MeanObs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">ObservationCount</span><span class="op">)</span>, </span>
<span>            SEObs <span class="op">=</span> <span class="fu">se</span><span class="op">(</span><span class="va">ObservationCount</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>   </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>yrmin <span class="op">=</span> <span class="va">MeanObs</span> <span class="op">+</span> <span class="va">SEObs</span>, yrmax <span class="op">=</span> <span class="va">MeanObs</span> <span class="op">-</span> <span class="va">SEObs</span><span class="op">)</span></span></code></pre></div>
<p>Now we can create the plot:</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">GRCA_year</span><span class="op">)</span> <span class="op">+</span>  </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_linerange.html" class="external-link">geom_pointrange</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">survey_year</span>, y <span class="op">=</span> <span class="va">MeanObs</span>, ymin <span class="op">=</span> <span class="va">yrmin</span>, ymax <span class="op">=</span> <span class="va">yrmax</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="1.6-VisualData_files/figure-html/plot2VLBO-1.png" width="700"></p>
<p>You will notice there was an increase in the mean number of GRCA
observed in the last three years, compared to 2015. You might now be
wondering why.</p>
</div>
<div class="section level3">
<h3 id="PM6-2">Mapping<a class="anchor" aria-label="anchor" href="#PM6-2"></a>
</h3>
<p>Resources you can use to help analyze and map your data include the
<a href="https://birdscanada.github.io/naturecounts/articles/index.html">NatureCounts
Spatial Data Tutorial</a> and the <a href="https://birdscanada.github.io/naturecounts/articles/articles/mapping-observations.html">Mapping
Observations</a> how-to article. The materials are not repeated here. We
encourage you to check this out if you are interested in mapping your
data!</p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Steffi LaZerte, Denis Lepage.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
